"use strict";(self["webpackChunkeverlasting"]=self["webpackChunkeverlasting"]||[]).push([[523],{200:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ne}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"contents"},[t("div",{staticClass:"body",class:{phone:!!e.phone}},[t("div",{staticClass:"main_home"},[e.phone?e._e():t("div",{class:e.isCollapse?"left_collapsed":"left"},[t("Menu",{attrs:{total:e.totals,"kit-list":e.kitList,"chat-list":e.chatList,"user-info":e.userInfo},on:{addList:e.addList,changeChat:e.changeChat,"message-history-updated":e.handleMessageHistoryUpdated,changeCollapse:e.handleToggleCollapse}})],1),t("div",{staticClass:"chat_right"},[0==e.isActive?t("Content",{attrs:{messageHistory:e.messageHistory,dialogueNoUpdate:e.dialogueNoUpdate}}):e._e()],1)]),t("div",[0==e.isActive?t("SendText",{attrs:{sendMessage:e.sendMessage},on:{sendMsgStatus:e.handleSendMsgStatusUpdated,"newMessages-updated":e.handleNewMsgUpdated,total:e.total}}):e._e()],1)])])},i=[],r=(s(7658),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"menu_box",class:{phone:!!e.phone},staticStyle:{padding:"20px"}},[t("el-button",{style:{width:"100%"},attrs:{type:"primary",icon:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold"},on:{click:e.toToggleCollapse}}),t("div",[t("character-selector",{on:{select:e.handleSelect}}),e.selectedOption?t("div",[t("p",[e._v("角色: "+e._s(e.selectedOption.botName))]),t("p",[e._v("角色ID: "+e._s(e.selectedOption.id))])]):e._e()],1)],1)])}),o=[],l=function(){var e=this,t=e._self._c;return t("el-select",{ref:"select",staticClass:"custom-select",attrs:{placeholder:"请选择角色"},on:{change:e.handleSelectChange,"visible-change":e.handleVisibleChange},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},[e._l(e.options,(function(s){return t("el-option",{key:s.id,attrs:{label:s.botName,value:s.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(s.botName))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(s.id))])])})),e.isLoading?t("el-option",{attrs:{disabled:""}},[e._v("Loading...")]):e._e()],2)},a=[],h={name:"CharacterSelector",data(){return{selectedValue:"",options:[],isLoading:!1,currentPage:1,pageSize:10,total:0}},mounted(){this.loadData(),this.$nextTick((()=>{console.log(this.$refs.select.$refs.popper),this.$refs.select.$refs.popper.addEventListener("scroll",this.handleScroll)}))},beforeDestroy(){this.$nextTick((()=>{console.log(this.$refs.select.$refs.popper),this.$refs.select.$refs.popper.removeEventListener("scroll",this.handleScroll)}))},methods:{async loadData(){this.isLoading=!0;try{const e=window.localStorage.getItem("userId");await this.$httpGet("GetUserBot",{pageNum:this.currentPage},!0,e,"query").then((e=>{let t=e.data;if(0!=t.code)console.log(t),this.$alert(t.msg,"提示");else{const{contentList:e,total:s}=t.data;this.options=this.options.concat(e.map((e=>({id:e.id,botName:e.botName,botType:e.botType,botDesc:e.botDesc,usageCount:e.usageCount})))),this.total+=s,this.isLoading=!1}}))}catch(e){console.error("Failed to load data:",e),this.isLoading=!1}},handleScroll(e){const t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.options.length<this.total&&(this.currentPage++,this.loadData())},handleSelectChange(e){if(""!==e){const t=this.options.find((t=>t.id===e));t&&this.$emit("select",{id:t.id,botName:t.botName,botType:t.botType,botDesc:t.botDesc,usageCount:t.usageCount})}},handleVisibleChange(e){e&&this.options.length<this.total&&(console.log("触底更新"),this.currentPage++,this.loadData())}}},c=h,p=s(1001),u=(0,p.Z)(c,l,a,!1,null,"b332e2ae",null),d=u.exports,g={props:["chatList","userInfo","kitList","total"],components:{CharacterSelector:d},data(){return{phone:!1,isActive:0,userInfos:{},selectedOption:null,messageHistoryMenu:[],newMessage:"",isCollapse:!1}},mounted(){},computed:{},watch:{selectedId:{handler(e){console.log("用户选择角色:",e),this.getChatHistoryById(e)}}},methods:{toToggleCollapse(){this.isCollapse=!this.isCollapse,this.$emit("changeCollapse",this.isCollapse)},handleSelect(e){this.selectedOption=e,console.log(this.selectedOption),this.loadMessageHistory(null),console.log(this.messageHistoryMenu)},async loadMessageHistory(e){try{await this.getChatHistoryById(this.selectedOption.id,e),window.localStorage.setItem("botId",this.selectedOption.id),console.log("msgHis: ",this.messageHistoryMenu)}catch(t){console.error("Failed to load message history:",t)}},getChatHistoryById(e,t=""){console.log("根据用户id获取记录",e);try{const s=window.localStorage.getItem("userId");let n={botId:e,userId:parseInt(s)};null==t?n["cursor"]=t:""==t||(n["cursor"]=t),console.log("Cursor",n),this.$httpPost("GetChatHistory",n,!0,"","json").then((e=>{console.log("该角色记录",e);let t=e.data;0!=t.code?(console.log(t),this.$alert(t.message,"提示")):(console.log("msgHisresData.data: ",t.data),this.messageHistoryMenu=t.data,this.$emit("message-history-updated",this.messageHistoryMenu))}))}catch(s){console.error(s)}}}},m=g,f=(0,p.Z)(m,r,o,!1,null,"bebdf2f4",null),k=f.exports,b=function(){var e=this,t=e._self._c;return t("div",e._l(e.sortedMessageHistory,(function(n,i){return t("div",{key:i},[n.dialogue.answer?t("div",{staticClass:"items"},[t("div",{staticClass:"tx"},[t("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:s(5695)}})]),e.phone?t("div",{staticClass:"chat_box phone"},[i<e.chatList.length-1?t("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:e._s(n.dialogue.answer)}}):t("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:e._s(e.obj.output)}})]):t("div",{staticClass:"chat_box"},[i<e.chatList.length-1?t("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:e._s(n.dialogue.answer)}}):t("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:e._s(e.obj.output)}})])]):e._e(),n.dialogue.question?t("div",{staticClass:"items items_right"},[e.phone?t("div",{staticClass:"chat_box phone",domProps:{innerHTML:e._s(n.dialogue.question)}}):t("div",{staticClass:"chat_box",domProps:{innerHTML:e._s(n.dialogue.question)}}),e._m(0,!0)]):e._e()])})),0)},x=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tx"},[t("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})])}],w=function(e,t,s,n){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,r){function o(e){try{a(n.next(e))}catch(t){r(t)}}function l(e){try{a(n["throw"](e))}catch(t){r(t)}}function a(e){e.done?s(e.value):i(e.value).then(o,l)}a((n=n.apply(e,t||[])).next())}))};class y{constructor(e,t,s,n){$(e),S(e),this.obj=e,this.input="string"===typeof t?[t]:t,this.fn="function"===typeof s?s:function(){},this.hooks="function"===typeof n?n:function(){},this.timer=0,this.typeAction={rollback:this.typedBack.bind(this),normal:this.play.bind(this),custom:this.fn},this.init()}init(){this.play()}play(){if(!this.input.length)return this.fn(this);let e=0,t=!1,s=this.input.shift()||"";this.timer=setInterval((()=>(e===s.length&&(e=0,t=!0,this.closeTimer()),this.obj.isEnd?this.closeTimer():t?this.nextTick():(this.obj.output=s.slice(0,e+1),this.hooks(s.slice(0,e+1),this),void e++))),this.obj.speed)}typedBack(){if(!this.input.length&&this.obj.sentencePause)return this.fn(this);let e=this.obj.output,t=e.length,s=!1;this.timer=setInterval((()=>(-1===t&&(this.obj.output="",this.hooks("",this),t=0,s=!0,this.closeTimer()),this.obj.isEnd?(this.closeTimer(),this.obj.singleBack=!1):s?(this.obj.singleBack=!1,(()=>{const{length:e}=this.input;return e?this.play():this.fn(this)})()):(this.obj.output=e.slice(0,t+1),this.hooks(e.slice(0,t+1),this),void t--))),this.obj.backSpeed)}nextTick(){return w(this,void 0,void 0,(function*(){return yield this.sleep(this.obj.sleep),this.obj.singleBack?this.typedBack():this.getOutputType()}))}getOutputType(){return this.typeAction[this.obj.type](this)}closeTimer(){clearInterval(this.timer)}sleep(e){return new Promise((t=>setTimeout(t,e)))}close(){return this.obj.isEnd=!0}}const _=e=>{throw new Error(e)},$=e=>{const t={output:"",type:"",isEnd:!1,speed:80,backSpeed:40,sleep:3e3,singleBack:!1,sentencePause:!1},s=Object.keys(t),n=Object.keys(e);s.length!==n.length&&_("配置对象错误: 字段数量不正确！"),s.forEach((t=>{void 0!==e[t]&&null!==e[t]||_("配置对象错误：字段值为null或undefined！")}))},S=e=>{Object.keys(e).forEach((t=>{const s=v[t](e);s.check()&&s.showTip(t)}))},v=(()=>({output:e=>new T("string",e.output),type:e=>new T("string",e.type),isEnd:e=>new T("boolean",e.isEnd),speed:e=>new T("number",e.speed),backSpeed:e=>new T("number",e.backSpeed),sleep:e=>new T("number",e.sleep),singleBack:e=>new T("boolean",e.singleBack),sentencePause:e=>new T("boolean",e.sentencePause)}))();class T{constructor(e,t){this.type=e,this.field=t}check(){return typeof this.field!==`${this.type}`}showTip(e){_(`配置对象错误：属性 ${e} 必须为 ${this.type} 类型！`)}}var z=y;function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function L(e,t){if("object"!==I(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function C(e){var t=L(e,"string");return"symbol"===I(t)?t:String(t)}function R(e,t,s){return t=C(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s(541);function A(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let M=A();function E(e){M=e}const N=/[&<>"']/,j=new RegExp(N.source,"g"),H=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,O=new RegExp(H.source,"g"),q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},P=e=>q[e];function B(e,t){if(t){if(N.test(e))return e.replace(j,P)}else if(H.test(e))return e.replace(O,P);return e}const U=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function D(e){return e.replace(U,((e,t)=>(t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")))}const Z=/(^|[^\[])\^/g;function Q(e,t){e="string"===typeof e?e:e.source,t=t||"";const s={replace:(t,n)=>(n=n.source||n,n=n.replace(Z,"$1"),e=e.replace(t,n),s),getRegex:()=>new RegExp(e,t)};return s}const F=/[^\w:]/g,V=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function G(e,t,s){if(e){let e;try{e=decodeURIComponent(D(s)).replace(F,"").toLowerCase()}catch(n){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!V.test(s)&&(s=Y(t,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch(n){return null}return s}const J={},X=/^[^:]+:\/*[^/]*$/,K=/^([^:]+:)[\s\S]*$/,W=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Y(e,t){J[" "+e]||(X.test(e)?J[" "+e]=e+"/":J[" "+e]=se(e,"/",!0)),e=J[" "+e];const s=-1===e.indexOf(":");return"//"===t.substring(0,2)?s?t:e.replace(K,"$1")+t:"/"===t.charAt(0)?s?t:e.replace(W,"$1")+t:e+t}const ee={exec:function(){}};function te(e,t){const s=e.replace(/\|/g,((e,t,s)=>{let n=!1,i=t;while(--i>=0&&"\\"===s[i])n=!n;return n?"|":" |"})),n=s.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else while(n.length<t)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function se(e,t,s){const n=e.length;if(0===n)return"";let i=0;while(i<n){const r=e.charAt(n-i-1);if(r!==t||s){if(r===t||!s)break;i++}else i++}return e.slice(0,n-i)}function ne(e,t){if(-1===e.indexOf(t[1]))return-1;const s=e.length;let n=0,i=0;for(;i<s;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return-1}function ie(e,t){e&&!e.silent&&(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||e.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-mangle."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-gfm-heading-id."))}function re(e,t){if(t<1)return"";let s="";while(t>1)1&t&&(s+=e),t>>=1,e+=e;return s+e}function oe(e,t,s,n){const i=t.href,r=t.title?B(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;const e={type:"link",raw:s,href:i,title:r,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,e}return{type:"image",raw:s,href:i,title:r,text:B(o)}}function le(e,t){const s=e.match(/^(\s+)(?:```)/);if(null===s)return t;const n=s[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[s]=t;return s.length>=n.length?e.slice(n.length):e})).join("\n")}class ae{constructor(e){this.options=e||M}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:se(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],s=le(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=se(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;const n=this.lexer.blockTokens(e);return this.lexer.state.top=s,{type:"blockquote",raw:t[0],tokens:n,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s,n,i,r,o,l,a,h,c,p,u,d,g=t[1].trim();const m=g.length>1,f={type:"list",raw:"",ordered:m,start:m?+g.slice(0,-1):"",loose:!1,items:[]};g=m?`\\d{1,9}\\${g.slice(-1)}`:`\\${g}`,this.options.pedantic&&(g=m?g:"[*+-]");const k=new RegExp(`^( {0,3}${g})((?:[\t ][^\\n]*)?(?:\\n|$))`);while(e){if(d=!1,!(t=k.exec(e)))break;if(this.rules.block.hr.test(e))break;if(s=t[0],e=e.substring(s.length),h=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],this.options.pedantic?(r=2,u=h.trimLeft()):(r=t[2].search(/[^ ]/),r=r>4?1:r,u=h.slice(r),r+=t[1].length),l=!1,!h&&/^ *$/.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),d=!0),!d){const t=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,r-1)}}#`);while(e){if(p=e.split("\n",1)[0],c=p,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),i.test(c))break;if(o.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=r||!c.trim())u+="\n"+c.slice(r);else{if(l)break;if(h.search(/[^ ]/)>=4)break;if(i.test(h))break;if(o.test(h))break;if(n.test(h))break;u+="\n"+c}l||c.trim()||(l=!0),s+=p+"\n",e=e.substring(p.length+1),h=c.slice(r)}}f.loose||(a?f.loose=!0:/\n *\n *$/.test(s)&&(a=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(u),n&&(i="[ ] "!==n[0],u=u.replace(/^\[[ xX]\] +/,""))),f.items.push({type:"list_item",raw:s,task:!!n,checked:i,loose:!1,text:u}),f.raw+=s}f.items[f.items.length-1].raw=s.trimRight(),f.items[f.items.length-1].text=u.trimRight(),f.raw=f.raw.trimRight();const b=f.items.length;for(o=0;o<b;o++)if(this.lexer.state.top=!1,f.items[o].tokens=this.lexer.blockTokens(f.items[o].text,[]),!f.loose){const e=f.items[o].tokens.filter((e=>"space"===e.type)),t=e.length>0&&e.some((e=>/\n.*\n/.test(e.raw)));f.loose=t}if(f.loose)for(o=0;o<b;o++)f.items[o].loose=!0;return f}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const s=this.options.sanitizer?this.options.sanitizer(t[0]):B(t[0]);e.type="paragraph",e.text=s,e.tokens=this.lexer.inline(s)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:s,title:n}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:te(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let s,n,i,r,o=e.align.length;for(s=0;s<o;s++)/^ *-+: *$/.test(e.align[s])?e.align[s]="right":/^ *:-+: *$/.test(e.align[s])?e.align[s]="center":/^ *:-+ *$/.test(e.align[s])?e.align[s]="left":e.align[s]=null;for(o=e.rows.length,s=0;s<o;s++)e.rows[s]=te(e.rows[s],e.header.length).map((e=>({text:e})));for(o=e.header.length,n=0;n<o;n++)e.header[n].tokens=this.lexer.inline(e.header[n].text);for(o=e.rows.length,n=0;n<o;n++)for(r=e.rows[n],i=0;i<r.length;i++)r[i].tokens=this.lexer.inline(r[i].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:B(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):B(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=se(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=ne(t[2],"()");if(e>-1){const s=0===t[0].indexOf("!")?5:4,n=s+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let s=t[2],n="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);e&&(s=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(e)?s.slice(1):s.slice(1,-1)),oe(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:n?n.replace(this.rules.inline._escapes,"$1"):n},t[0],this.lexer)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){let e=(s[2]||s[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=s[0].charAt(0);return{type:"text",raw:e,text:e}}return oe(s,e,s[0],this.lexer)}}emStrong(e,t,s=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n)return;if(n[3]&&s.match(/[\p{L}\p{N}]/u))return;const i=n[1]||n[2]||"";if(!i||i&&(""===s||this.rules.inline.punctuation.exec(s))){const s=n[0].length-1;let i,r,o=s,l=0;const a="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;a.lastIndex=0,t=t.slice(-1*e.length+s);while(null!=(n=a.exec(t))){if(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!i)continue;if(r=i.length,n[3]||n[4]){o+=r;continue}if((n[5]||n[6])&&s%3&&!((s+r)%3)){l+=r;continue}if(o-=r,o>0)continue;r=Math.min(r,r+o+l);const t=e.slice(0,s+n.index+(n[0].length-i.length)+r);if(Math.min(s,r)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const a=t.slice(2,-2);return{type:"strong",raw:t,text:a,tokens:this.lexer.inlineTokens(a)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const s=/[^ ]/.test(e),n=/^ /.test(e)&&/ $/.test(e);return s&&n&&(e=e.substring(1,e.length-1)),e=B(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const s=this.rules.inline.autolink.exec(e);if(s){let e,n;return"@"===s[2]?(e=B(this.options.mangle?t(s[1]):s[1]),n="mailto:"+e):(e=B(s[1]),n=e),{type:"link",raw:s[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let s;if(s=this.rules.inline.url.exec(e)){let e,n;if("@"===s[2])e=B(this.options.mangle?t(s[0]):s[0]),n="mailto:"+e;else{let t;do{t=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0]}while(t!==s[0]);e=B(s[0]),n="www."===s[1]?"http://"+s[0]:s[0]}return{type:"link",raw:s[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const s=this.rules.inline.text.exec(e);if(s){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):B(s[0]):s[0]:B(this.options.smartypants?t(s[0]):s[0]),{type:"text",raw:s[0],text:e}}}}const he={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ee,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};he.def=Q(he.def).replace("label",he._label).replace("title",he._title).getRegex(),he.bullet=/(?:[*+-]|\d{1,9}[.)])/,he.listItemStart=Q(/^( *)(bull) */).replace("bull",he.bullet).getRegex(),he.list=Q(he.list).replace(/bull/g,he.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+he.def.source+")").getRegex(),he._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",he._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,he.html=Q(he.html,"i").replace("comment",he._comment).replace("tag",he._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),he.paragraph=Q(he._paragraph).replace("hr",he.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he._tag).getRegex(),he.blockquote=Q(he.blockquote).replace("paragraph",he.paragraph).getRegex(),he.normal={...he},he.gfm={...he.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},he.gfm.table=Q(he.gfm.table).replace("hr",he.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he._tag).getRegex(),he.gfm.paragraph=Q(he._paragraph).replace("hr",he.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",he.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",he._tag).getRegex(),he.pedantic={...he.normal,html:Q("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",he._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ee,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Q(he.normal._paragraph).replace("hr",he.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",he.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ce={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ee,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ee,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function pe(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function ue(e){let t,s,n="";const i=e.length;for(t=0;t<i;t++)s=e.charCodeAt(t),Math.random()>.5&&(s="x"+s.toString(16)),n+="&#"+s+";";return n}ce._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ce.punctuation=Q(ce.punctuation).replace(/punctuation/g,ce._punctuation).getRegex(),ce.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ce.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,ce._comment=Q(he._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ce.emStrong.lDelim=Q(ce.emStrong.lDelim).replace(/punct/g,ce._punctuation).getRegex(),ce.emStrong.rDelimAst=Q(ce.emStrong.rDelimAst,"g").replace(/punct/g,ce._punctuation).getRegex(),ce.emStrong.rDelimUnd=Q(ce.emStrong.rDelimUnd,"g").replace(/punct/g,ce._punctuation).getRegex(),ce._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ce._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ce._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ce.autolink=Q(ce.autolink).replace("scheme",ce._scheme).replace("email",ce._email).getRegex(),ce._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ce.tag=Q(ce.tag).replace("comment",ce._comment).replace("attribute",ce._attribute).getRegex(),ce._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ce._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ce._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ce.link=Q(ce.link).replace("label",ce._label).replace("href",ce._href).replace("title",ce._title).getRegex(),ce.reflink=Q(ce.reflink).replace("label",ce._label).replace("ref",he._label).getRegex(),ce.nolink=Q(ce.nolink).replace("ref",he._label).getRegex(),ce.reflinkSearch=Q(ce.reflinkSearch,"g").replace("reflink",ce.reflink).replace("nolink",ce.nolink).getRegex(),ce.normal={...ce},ce.pedantic={...ce.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Q(/^!?\[(label)\]\((.*?)\)/).replace("label",ce._label).getRegex(),reflink:Q(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ce._label).getRegex()},ce.gfm={...ce.normal,escape:Q(ce.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ce.gfm.url=Q(ce.gfm.url,"i").replace("email",ce.gfm._extended_email).getRegex(),ce.breaks={...ce.gfm,br:Q(ce.br).replace("{2,}","*").getRegex(),text:Q(ce.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class de{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||M,this.options.tokenizer=this.options.tokenizer||new ae,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:he.normal,inline:ce.normal};this.options.pedantic?(t.block=he.pedantic,t.inline=ce.pedantic):this.options.gfm&&(t.block=he.gfm,this.options.breaks?t.inline=ce.breaks:t.inline=ce.gfm),this.tokenizer.rules=t}static get rules(){return{block:he,inline:ce}}static lex(e,t){const s=new de(t);return s.lex(e)}static lexInline(e,t){const s=new de(t);return s.inlineTokens(e)}lex(e){let t;e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);while(t=this.inlineQueue.shift())this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let s,n,i,r;e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,s)=>t+"    ".repeat(s.length)));while(e)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))))if(s=this.tokenizer.space(e))e=e.substring(s.raw.length),1===s.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(s);else if(s=this.tokenizer.code(e))e=e.substring(s.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?t.push(s):(n.raw+="\n"+s.raw,n.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(s=this.tokenizer.fences(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.heading(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.hr(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.blockquote(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.list(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.html(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.def(e))e=e.substring(s.raw.length),n=t[t.length-1],!n||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(n.raw+="\n"+s.raw,n.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(s=this.tokenizer.table(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.lheading(e))e=e.substring(s.raw.length),t.push(s);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const s=e.slice(1);let n;this.options.extensions.startBlock.forEach((function(e){n=e.call({lexer:this},s),"number"===typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i)))n=t[t.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+s.raw,n.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(s),r=i.length!==e.length,e=e.substring(s.raw.length);else if(s=this.tokenizer.text(e))e=e.substring(s.raw.length),n=t[t.length-1],n&&"text"===n.type?(n.raw+="\n"+s.raw,n.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s,n,i,r,o,l,a=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)while(null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(a)))e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+re("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}while(null!=(r=this.tokenizer.rules.inline.blockSkip.exec(a)))a=a.slice(0,r.index)+"["+re("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while(null!=(r=this.tokenizer.rules.inline.escapedEmSt.exec(a)))a=a.slice(0,r.index+r[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;while(e)if(o||(l=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))))if(s=this.tokenizer.escape(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.tag(e))e=e.substring(s.raw.length),n=t[t.length-1],n&&"text"===s.type&&"text"===n.type?(n.raw+=s.raw,n.text+=s.text):t.push(s);else if(s=this.tokenizer.link(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(s.raw.length),n=t[t.length-1],n&&"text"===s.type&&"text"===n.type?(n.raw+=s.raw,n.text+=s.text):t.push(s);else if(s=this.tokenizer.emStrong(e,a,l))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.codespan(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.br(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.del(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.autolink(e,ue))e=e.substring(s.raw.length),t.push(s);else if(this.state.inLink||!(s=this.tokenizer.url(e,ue))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const s=e.slice(1);let n;this.options.extensions.startInline.forEach((function(e){n=e.call({lexer:this},s),"number"===typeof n&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(s=this.tokenizer.inlineText(i,pe))e=e.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(l=s.raw.slice(-1)),o=!0,n=t[t.length-1],n&&"text"===n.type?(n.raw+=s.raw,n.text+=s.text):t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(s.raw.length),t.push(s);return t}}class ge{constructor(e){this.options=e||M}code(e,t,s){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,n);null!=t&&t!==e&&(s=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+B(n)+'">'+(s?e:B(e,!0))+"</code></pre>\n":"<pre><code>"+(s?e:B(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,s,n){if(this.options.headerIds){const i=this.options.headerPrefix+n.slug(s);return`<h${t} id="${i}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,s){const n=t?"ol":"ul",i=t&&1!==s?' start="'+s+'"':"";return"<"+n+i+">\n"+e+"</"+n+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const s=t.header?"th":"td",n=t.align?`<${s} align="${t.align}">`:`<${s}>`;return n+e+`</${s}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,s){if(e=G(this.options.sanitize,this.options.baseUrl,e),null===e)return s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+s+"</a>",n}image(e,t,s){if(e=G(this.options.sanitize,this.options.baseUrl,e),null===e)return s;let n=`<img src="${e}" alt="${s}"`;return t&&(n+=` title="${t}"`),n+=this.options.xhtml?"/>":">",n}text(e){return e}}class me{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,s){return""+s}image(e,t,s){return""+s}br(){return""}}class fe{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let s=e,n=0;if(this.seen.hasOwnProperty(s)){n=this.seen[e];do{n++,s=e+"-"+n}while(this.seen.hasOwnProperty(s))}return t||(this.seen[e]=n,this.seen[s]=0),s}slug(e,t={}){const s=this.serialize(e);return this.getNextSafeSlug(s,t.dryrun)}}class ke{constructor(e){this.options=e||M,this.options.renderer=this.options.renderer||new ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new me,this.slugger=new fe}static parse(e,t){const s=new ke(t);return s.parse(e)}static parseInline(e,t){const s=new ke(t);return s.parseInline(e)}parse(e,t=!0){let s,n,i,r,o,l,a,h,c,p,u,d,g,m,f,k,b,x,w,y="";const _=e.length;for(s=0;s<_;s++)if(p=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(w=this.options.extensions.renderers[p.type].call({parser:this},p),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type)))y+=w||"";else switch(p.type){case"space":continue;case"hr":y+=this.renderer.hr();continue;case"heading":y+=this.renderer.heading(this.parseInline(p.tokens),p.depth,D(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue;case"code":y+=this.renderer.code(p.text,p.lang,p.escaped);continue;case"table":for(h="",a="",r=p.header.length,n=0;n<r;n++)a+=this.renderer.tablecell(this.parseInline(p.header[n].tokens),{header:!0,align:p.align[n]});for(h+=this.renderer.tablerow(a),c="",r=p.rows.length,n=0;n<r;n++){for(l=p.rows[n],a="",o=l.length,i=0;i<o;i++)a+=this.renderer.tablecell(this.parseInline(l[i].tokens),{header:!1,align:p.align[i]});c+=this.renderer.tablerow(a)}y+=this.renderer.table(h,c);continue;case"blockquote":c=this.parse(p.tokens),y+=this.renderer.blockquote(c);continue;case"list":for(u=p.ordered,d=p.start,g=p.loose,r=p.items.length,c="",n=0;n<r;n++)f=p.items[n],k=f.checked,b=f.task,m="",f.task&&(x=this.renderer.checkbox(k),g?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=x+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=x+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:x}):m+=x),m+=this.parse(f.tokens,g),c+=this.renderer.listitem(m,b,k);y+=this.renderer.list(c,u,d);continue;case"html":y+=this.renderer.html(p.text,p.block);continue;case"paragraph":y+=this.renderer.paragraph(this.parseInline(p.tokens));continue;case"text":c=p.tokens?this.parseInline(p.tokens):p.text;while(s+1<_&&"text"===e[s+1].type)p=e[++s],c+="\n"+(p.tokens?this.parseInline(p.tokens):p.text);y+=t?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+p.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return y}parseInline(e,t){t=t||this.renderer;let s,n,i,r="";const o=e.length;for(s=0;s<o;s++)if(n=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]&&(i=this.options.extensions.renderers[n.type].call({parser:this},n),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)))r+=i||"";else switch(n.type){case"escape":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;case"text":r+=t.text(n.text);break;default:{const e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return r}}class be{constructor(e){this.options=e||M}preprocess(e){return e}postprocess(e){return e}}function xe(e,t,s){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+B(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):s?void s(null,e):e}if(t)return Promise.reject(n);if(!s)throw n;s(n)}}function we(e,t){return(s,n,i)=>{"function"===typeof n&&(i=n,n=null);const r={...n};n={...ye.defaults,...r};const o=xe(n.silent,n.async,i);if("undefined"===typeof s||null===s)return o(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof s)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(ie(n,i),n.hooks&&(n.hooks.options=n),i){const r=n.highlight;let a;try{n.hooks&&(s=n.hooks.preprocess(s)),a=e(s,n)}catch(l){return o(l)}const h=function(e){let s;if(!e)try{n.walkTokens&&ye.walkTokens(a,n.walkTokens),s=t(a,n),n.hooks&&(s=n.hooks.postprocess(s))}catch(l){e=l}return n.highlight=r,e?o(e):i(null,s)};if(!r||r.length<3)return h();if(delete n.highlight,!a.length)return h();let c=0;return ye.walkTokens(a,(function(e){"code"===e.type&&(c++,setTimeout((()=>{r(e.text,e.lang,(function(t,s){if(t)return h(t);null!=s&&s!==e.text&&(e.text=s,e.escaped=!0),c--,0===c&&h()}))}),0))})),void(0===c&&h())}if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(s):s).then((t=>e(t,n))).then((e=>n.walkTokens?Promise.all(ye.walkTokens(e,n.walkTokens)).then((()=>e)):e)).then((e=>t(e,n))).then((e=>n.hooks?n.hooks.postprocess(e):e)).catch(o);try{n.hooks&&(s=n.hooks.preprocess(s));const i=e(s,n);n.walkTokens&&ye.walkTokens(i,n.walkTokens);let r=t(i,n);return n.hooks&&(r=n.hooks.postprocess(r)),r}catch(l){return o(l)}}}function ye(e,t,s){return we(de.lex,ke.parse)(e,t,s)}R(be,"passThroughHooks",new Set(["preprocess","postprocess"])),ye.options=ye.setOptions=function(e){return ye.defaults={...ye.defaults,...e},E(ye.defaults),ye},ye.getDefaults=A,ye.defaults=M,ye.use=function(...e){const t=ye.defaults.extensions||{renderers:{},childTokens:{}};e.forEach((e=>{const s={...e};if(s.async=ye.defaults.async||s.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const s=t.renderers[e.name];t.renderers[e.name]=s?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=s.apply(this,t)),n}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");t[e.level]?t[e.level].unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),s.extensions=t),e.renderer){const t=ye.defaults.renderer||new ge;for(const s in e.renderer){const n=t[s];t[s]=(...i)=>{let r=e.renderer[s].apply(t,i);return!1===r&&(r=n.apply(t,i)),r}}s.renderer=t}if(e.tokenizer){const t=ye.defaults.tokenizer||new ae;for(const s in e.tokenizer){const n=t[s];t[s]=(...i)=>{let r=e.tokenizer[s].apply(t,i);return!1===r&&(r=n.apply(t,i)),r}}s.tokenizer=t}if(e.hooks){const t=ye.defaults.hooks||new be;for(const s in e.hooks){const n=t[s];be.passThroughHooks.has(s)?t[s]=i=>{if(ye.defaults.async)return Promise.resolve(e.hooks[s].call(t,i)).then((e=>n.call(t,e)));const r=e.hooks[s].call(t,i);return n.call(t,r)}:t[s]=(...i)=>{let r=e.hooks[s].apply(t,i);return!1===r&&(r=n.apply(t,i)),r}}s.hooks=t}if(e.walkTokens){const t=ye.defaults.walkTokens;s.walkTokens=function(s){let n=[];return n.push(e.walkTokens.call(this,s)),t&&(n=n.concat(t.call(this,s))),n}}ye.setOptions(s)}))},ye.walkTokens=function(e,t){let s=[];for(const n of e)switch(s=s.concat(t.call(ye,n)),n.type){case"table":for(const e of n.header)s=s.concat(ye.walkTokens(e.tokens,t));for(const e of n.rows)for(const n of e)s=s.concat(ye.walkTokens(n.tokens,t));break;case"list":s=s.concat(ye.walkTokens(n.items,t));break;default:ye.defaults.extensions&&ye.defaults.extensions.childTokens&&ye.defaults.extensions.childTokens[n.type]?ye.defaults.extensions.childTokens[n.type].forEach((function(e){s=s.concat(ye.walkTokens(n[e],t))})):n.tokens&&(s=s.concat(ye.walkTokens(n.tokens,t)))}return s},ye.parseInline=we(de.lexInline,ke.parseInline),ye.Parser=ke,ye.parser=ke.parse,ye.Renderer=ge,ye.TextRenderer=me,ye.Lexer=de,ye.lexer=de.lex,ye.Tokenizer=ae,ye.Slugger=fe,ye.Hooks=be,ye.parse=ye;ye.options,ye.setOptions,ye.use,ye.walkTokens,ye.parseInline,ke.parse,de.lex;var _e={props:["messageHistory","dialogueNoUpdate"],data(){return{phone:!1,typewriter:"",mdRegex:"",i:0,timer:0,chatList:[],dialogueNoUpdateFlag:!0,obj:{output:"",isEnd:!1,speed:80,singleBack:!0,sleep:0,type:"rollback",backSpeed:0,sentencePause:!0}}},computed:{sortedMessageHistory(){return console.log("sortedMessageHistory"),0!=this.chatList.length&&(this.chatList.sort(((e,t)=>e.dialogueNo-t.dialogueNo)),this.dialogueNoUpdateFlag?(console.log("dialogueNoUpdated"),window.localStorage.setItem("dialogueNo",this.chatList[this.chatList.length-1].dialogueNo)):console.log("dialogueNo not update")),this.chatList}},watch:{dialogueNoUpdate:{handler(e){this.dialogueNoUpdateFlag=e}},messageHistory:{handler(e){if(this.chatList=e,e.length>0){e[e.length-1].dialogue.answer&&(this.mdRegex.test(e[e.length-1].dialogue.answer)?this.initTyped(ye(e[e.length-1].dialogue.answer)):this.initTyped(e[e.length-1].dialogue.answer));for(var t=0;t<e.length;t++)this.mdRegex.test(e[t].dialogue.answer)&&(e[t].dialogue.answer=ye(e[t].dialogue.answer)),this.mdRegex.test(e[t].dialogue.question)&&(e[t].dialogue.question=ye(e[t].dialogue.question))}},deep:!0}},mounted(){if(this.mdRegex=/[#*`|.png]/,this.phone=JSON.parse(window.localStorage.getItem("phone")),this.chatList=this.messageHistory,this.chatList&&this.chatList.length>0){this.chatList[this.chatList.length-1].dialogue.answer&&(this.mdRegex.test(this.chatList[this.chatList.length-1].dialogue.answer)?this.initTyped(ye(this.chatList[this.chatList.length-1].dialogue.answer)):this.initTyped(this.chatList[this.chatList.length-1].dialogue.answer));for(var e=0;e<this.chatList.length;e++)this.mdRegex.test(this.chatList[e].dialogue.answer)&&(this.chatList[e].dialogue.answer=ye(this.chatList[e].dialogue.answer)),this.mdRegex.test(this.chatList[e].dialogue.question)&&(this.chatList[e].dialogue.question=ye(this.chatList[e].dialogue.question))}},methods:{getMessageRole(e){return e.question?"question-role":e.answer?"answer-role":""},initTyped(e,t,s){const n=this.obj;new z(n,e,t,s)}}},$e=_e,Se=(0,p.Z)($e,b,x,!1,null,null,null),ve=Se.exports,Te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"input_box",class:{phone:!!e.phone}},[t("el-input",{ref:"index",staticStyle:{width:"100%"},attrs:{type:"textarea",row:1,disabled:e.disabled,placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendChat.apply(null,arguments)}},model:{value:e.sendText,callback:function(t){e.sendText=t},expression:"sendText"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",disabled:e.disabled},on:{click:e.sendChat}},[t("i",{staticClass:"el-icon-s-promotion",staticStyle:{"font-size":"20px"}})])],1)},ze=[],Ie={props:["sendMessage"],data(){return{phone:!1,sendText:"",obj:{},logId:"",disabled:!1,messagesList:[],newMessageList:[],sendMessageList:[],num:0}},watch:{sendMessage:{handler(e){this.sendMessageList=e,console.log("in Send Message",this.sendMessageList),window.localStorage.setItem("messages",JSON.stringify(e)),this.disabled=!1}}},created(){},mounted(){this.phone=JSON.parse(window.localStorage.getItem("phone")),window.localStorage.setItem("messages",JSON.stringify(this.sendMessageList))},methods:{sendChat(e){if(this.sendText){let e=window.localStorage.getItem("dialogueNo");const t={botId:parseInt(window.localStorage.getItem("botId")),userId:parseInt(window.localStorage.getItem("userId")),message:this.sendText,deviceType:"",location:"",dialogueNo:e+1};let s={dialogueNo:e+1,dialogue:{question:this.sendText,answer:"发送失败"},sendStatus:null};this.sendText="",setTimeout((()=>{this.disabled=!0,this.$httpPost("CHAT",t,!0,"","json").then((e=>{let t=e.data;if(0==t.code)this.sendMessageList.push(t.data.dialogue),this.disabled=!1,console.log("sendMsgStatus",!0),s.sendStatus=!0,setTimeout((()=>{window.localStorage.setItem("dialogueNo",t.data.dialogueNo),this.$emit("newMessages-updated",t.data),this.$emit("sendMsgStatus",!0)}),500);else{console.log("发送失败",t.msg),s.sendStatus=!1;console.log("inputText",s),this.$emit("newMessages-updated",s),console.log("sendMsgStatus",!1),this.$emit("sendMsgStatus",!1)}}))}),500)}else this.$message.error("请输入")}}},Le=Ie,Ce=(0,p.Z)(Le,Te,ze,!1,null,null,null),Re=Ce.exports,Ae={components:{Menu:k,Content:ve,SendText:Re},data(){return{cmOptions:{tabSize:2,mode:"text/javascript",theme:"base16-light",lineNumbers:!0,line:!0},messageHistory:[],sendMessage:[],dialogueNoUpdate:!0,newMessagesContent:null,list:[],ai_list:[],totals:0,dialogVisibles:!1,sendText:"",title:"New Chat",isActive:0,userInfo:{},chatLists:[],kitList:[],chatListses:[],direction:"ltr",chatList:[],oldScrollTop:0,phone:!1,sdState:0,isOpenBing:0,notice:"",isCollapse:!1}},created(){console.log("http_chat_mode"),console.log(this.$route.params.id),this.selectedId=this.$route.params.id||"",""==this.selectedId?console.log("no input"):(this.ai_list=[{label:"选项1",value:"1"},{label:"选项2",value:"2"},{label:"选项3",value:this.selectedId}],console.log(this.ai_list))},beforeMount(){},mounted(){this.phone=JSON.parse(window.localStorage.getItem("phone")),console.log(this.phone,"000"),document.querySelector(".box").addEventListener("scroll",this.scrolling),this.$route.query&&this.$route.query.id?(console.log(122),this.isActive=1):this.isActive=0},watch:{chatLists:{handler(e){console.log(e,"000"),this.scrollToBottom()},deep:!0}},methods:{handleToggleCollapse(e){console.log("isCollapse",e),this.isCollapse=!this.isCollapse},handleNewMsgUpdated(e){console.log("newMessages",e),this.newMessagesContent=e},handleSendMsgStatusUpdated(e){e?(console.log("更新内容1"),this.messageHistory.push(this.newMessagesContent),console.log("messageHistory",this.messageHistory)):(console.log("更新内容2"),this.messageHistory.push(this.newMessagesContent),this.dialogueNoUpdate=e,console.log("messageHistory",this.messageHistory))},handleMessageHistoryUpdated(e){console.log("Received message history:",e),this.messageHistory=e},test(){this.$store.state.drawer=!0,console.log(this.$store.state.drawer)},getSdState(){this.$https("GETSDSTATE",{}).then((e=>{this.sdState=e.data.isOpenSd,this.isOpenBing=e.data.isOpenBing}))},chatListss(e){this.chatListses=e},changeChats(e){1==e?this.$confirm("画图记录不做保存","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{this.isActive=e,this.chatListses=[{content:"",role:"user"}]})):2==e?this.$router.push("/"):3==e?this.$router.push("/user/product"):this.isActive=e},close(e){this.drawer=e,this.$store.commit("SET_OPEN",e)},addList(e){this.chatLists=e[0].chatLists,this.title=e[0].name},scrollToBottom(){this.$nextTick((()=>{var e=this.$el.querySelector(".chat_right");e.scrollTop=e.scrollHeight}))},scrolling(){let e=document.querySelector(".chat_right").scrollTop,t=e-this.oldScrollTop;this.oldScrollTop=e,this.scrollFlag=!(t<0)},total(e){this.totals=e},changeChat(e){this.title=e.data.name,this.chatLists=e.data.chatLists,this.drawer=e.show,this.$store.commit("SET_OPEN",e.show)}}},Me=Ae,Ee=(0,p.Z)(Me,n,i,!1,null,"0b0792b0",null),Ne=Ee.exports},5695:function(e,t,s){e.exports=s.p+"img/chat.f3f1b7ed.png"}}]);
//# sourceMappingURL=523.3dfb6687.js.map